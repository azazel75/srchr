<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
            "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
	<head>
		<title>srchr.history</title>
		<style>
			#list {
				padding-top: 10px;
				padding-bottom: 10px;
				border: solid 1px;
				width: 200px;
			}
			#description.error {
				border-color: red;	
			}
		</style>
	</head>
	<body>
        <h1>Srchr.History</h1>
		<p>History provides a list of model instances saved in local storage
		and a means to remove them from the list.</p>
		
		<h2>Demo</h2>
		<p>The following boxes shows the list of items
		   added to the srchr.history widget:</p>
		<div id='list'></div>
		<p>Add to the list by entering a todo task:</p>
		<form id='todoForm' action=''>
			<input type='text' id='description'>
			<input type='submit' value='Create Todo' />
		</form>
		<p>When you add it, it will appear above.  Refresh the page,
		   and you should still see it.</p>
		
		<script type='text/javascript' src='../../steal/steal.js'></script>
		<script type='text/javascript'>
		  steal('can', 'srchr/history', '/srchr/srchr/models/history.js', function(can, History, HistoryModel){
		  	new History("#list", {
  				titleHelper : function(history){
  					return history.description;
  				},
  				storeName : "historyStorage"
  			});
			
  			$("#todoForm").submit(function(ev){
  				ev.preventDefault();

  				// remove the error class
  				$("input#description").removeClass("error");
  				
  				// validate
  				if (!$("#description").val().length) {
  					$("input#description").addClass("error");
  					return false;
  				}

  				var todo = new HistoryModel({
  					description: $("#description").val()
  				});

				todo.save();
				
  			 	$("#description").val("")[0].focus();
  			});
  		})
		</script>
	</body>
</html>